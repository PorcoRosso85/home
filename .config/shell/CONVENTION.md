## Bash コーディング規約

1. **ファイル構成:** 1ファイル1関数。ファイル名と関数名は一致させる。
    * 例: `update_user_profile` 関数は `update_user_profile.sh` ファイルに記述する。
    * 補足: 複雑な処理は小さな関数に分割し、`update_user_profile_utils.sh` のように `_utils.sh` をサフィックスとしたファイルにまとめて、元のファイルから `source` コマンドで呼び出すことを検討する。

2. **命名規則:**
    * 関数名/ファイル名: 冗長な命名を許容する。一目で目的が理解できることを優先。
        * 例: `get_user_profile_by_id` のように具体的な命名を推奨。
    * 変数名: 小文字のスネークケースを使用。
        * 例: `user_name`, `max_retry_count`
    * グローバル変数: 大文字のスネークケースを使用。使用は最小限に抑える。
        * 例: `API_KEY`
    * 定数: 大文字のスネークケースを使用。
        * 例: `MAX_RETRY_COUNT`

3. **シェバン:**  `#!/bin/bash` をファイルの先頭に必ず記述する。実行権限も付与する (`chmod +x`)。

4. **インデント:** スペース2つを使用。適切な改行と合わせて読みやすさを重視する。

5. **マジックナンバー:** 避け、定数または変数として定義する。

6. **コメント:** 処理の意図を明確にするために積極的に使用する。引数の意味もコメントで明記する。

7. **エラー処理:** コマンドの終了ステータス `$?` を確認し、必要に応じてエラーメッセージを出力する。 `set -o pipefail` を使用してパイプライン全体のエラー処理を行う。

8. **変数のスコープ:** 関数内では `local` キーワードを使用して変数のスコープを制限する。

9. **クォート:** 変数展開は必ずダブルクォートで囲む。

10. **静的解析:** `shellcheck` などのツールを使用してコードの品質を管理する。

11. **厳格なモード:** `set -u` (未定義変数参照時にエラー終了) をスクリプトの先頭に記述する。

12. **関数引数:** `$1`, `$2` ... で参照する。


**補足事項:**

* 冗長な命名は可読性を向上させますが、過度に冗長な命名は避けるべきです。バランスが重要です。
* `set -u` と `set -o pipefail` は、潜在的なバグを早期に発見するために非常に有効です。
* `shellcheck` は、Bashスクリプトの静的解析ツールです。コードの潜在的な問題を検出し、修正方法を提案してくれます。


この規約に従うことで、Bashスクリプトの保守性、可読性、信頼性が向上します。
