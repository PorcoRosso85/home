# 依存性管理

## 原則: 依存性注入（Dependency Injection）

すべての依存関係は、外部から明示的に注入されるべきです。これにより、モジュールの独立性が高まり、テストが容易になります。

## ルール

- **関数の引数として注入**: 必要な関数や設定値は、すべて関数の引数として渡します。
- **グローバル状態の禁止**: グローバル変数の読み書きや、シングルトンのような暗黙的な共有状態に依存してはいけません。
- **デフォルト引数の禁止**: 依存性が暗黙的になるため、デフォルト引数で依存性を注入することは禁止します。
- **高階関数パターン**: 依存性を注入して特定の機能を持つ関数を生成する「ファクトリ関数」のパターンを推奨します。
  ```typescript
  // 依存性（db）を引数に取り、ユーザーを取得する関数を返す
  const createUserFetcher = (db: Database) => (userId: string) => {
    return db.fetch(userId);
  };
  ```

## パッケージ管理

各言語で推奨されるパッケージマネージャーは以下の通りです。

| 言語 | パッケージマネージャー |
| :--- | :--- |
| **Python** | `uv` |
| **TypeScript** | `pnpm` または `deno` |
| **Go** | `go mod` |
| **Rust** | `cargo` |
| **Zig** | `zig build` |
