### 目的
次のフォーマットに従い仕様書を生成する

---

### フォーマットルール

#### タイトル
各セクションの説明文を短いタイトルで表現する（例：コメント再生成処理）

#### 処理概要の詳細
横80文字以内で詳細を記述する 複数行にする場合でも横幅は80文字以内に制限する

#### 引数
固定4行で記述する 不要な行がある場合空行を挿入する

#### 環境変数
固定5行で記述する 不要な行がある場合空行を挿入する

#### 異常終了
固定3行でログ出力内容を記述する 「ｘｘｘをログ」という形式で記述する（ｘｘｘにはエラー型名）

---

### フォーマットサンプル

#### コメント再生成処理  
IPと日付に基づいてAIコメントを再生成し結果を格納する  
引数  
ip_id (str): IP ID  
ip_name (str): IP名  
aggregate_date (str): 集計日 (YYYY-MM-DD形式)  
  

環境変数  
CLOUD_STORAGE_BUCKET_NAME (クラウドストレージバケット名)  
  
  
  
異常終了  
SearchErrorをログ  
StorageErrorをログ  
  

#### AIコメント生成処理  
関連記事データを元にAIコメントを作成し生成結果を処理する  
引数  
ip_id (str): IP ID  
ip_name (str): IP名  
aggregate_dt (str): 集計日 (YYYY-MM-DD形式)  
  

環境変数  
RETRY_COUNT: AIコメント生成処理のリトライ回数  
WEB_SITE_SEARCH_DAYS_BEFORE: 検索期間（開始日）  
WEB_SITE_SEARCH_DAYS_AFTER: 検索期間（終了日）  
  
  

異常終了  
SearchErrorをログ  
VertexAiErrorをログ  
  

#### 既存コメントチェック処理  
IP_IDと集計日の組み合わせでデータベースにコメントがあるかチェックする  
引数  
ip_id (str): IP ID  
aggregate_dt (str): 集計日 (YYYY-MM-DD形式)  
  

環境変数  
TODO: DB接続に関する環境変数 (コードに不明点があるためTODO)  
  
  
  

異常終了  
DatabaseErrorをログ  

---

### 使用手順
コード全体を読み全体的な機能と処理の流れを理解する
論理的な処理ステップに分け各ステップごとに記述する
共通処理や終了処理があれば追加する
