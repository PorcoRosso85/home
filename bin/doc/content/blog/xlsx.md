+++
title = "単体テスト・統合テスト"
date = 2025-01-30
+++

統合テスト

| テスト対象要件 | カテゴリ（大） | カテゴリ（小）     | 観点                                               | 確認方法     | 対象処理 | テスト実施日 | 確認者 | テスト結果 | テスト完了日 | 備考                                 |
| -------------- | -------------- | ------------------ | -------------------------------------------------- | ------------ | -------- | ------------ | ------ | ---------- | ------------ | ------------------------------------ |
| 日次分析       | 正常系         |                    | 分析対象候補全体のIPを取得できる                   | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析対象候補全体のIPを一部しか取得できない         | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析対象候補全体のIPを全く取得できない             | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析対象候補とは無関係のIPを取得してしまう         | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 正常系         |                    | 分析対象IPの抽出が適切である                       | ログ出力     |          |              |        |            |              | ※適切かどうかの判定要件? 総合テスト? |
| 日次分析       | 異常系         |                    | 分析対象IPの抽出が一部不適切である                 | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析対象IPの抽出が全く不適切である                 | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析対象IPの抽出処理でエラーが発生する             | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 正常系         |                    | 分析対象IPの分析結果が適切である                   | ログ出力     |          |              |        |            |              | ※適切かどうかの判定要件? 総合テスト? |
| 日次分析       | 異常系         |                    | 分析対象IPの分析結果が一部不適切である             | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析対象IPの分析結果が全く不適切である             | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析対象IPの分析処理でエラーが発生する             | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 正常系         |                    | 分析対象IPの分析結果が適切に保存されている         | ファイル出力 |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析対象IPの分析結果が一部保存されていない         | ファイル出力 |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析対象IPの分析結果が全く保存されていない         | ファイル出力 |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析対象IPの分析結果が誤った場所に保存されている   | ファイル出力 |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析対象IPの分析結果の保存処理でエラーが発生する   | ファイル出力 |          |              |        |            |              |                                      |
| 日次分析       | 正常系         |                    | 分析処理成功の通知処理が適切に行われる             | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析処理成功の通知処理が遅延する                   | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析処理成功の通知処理が一部失敗する               | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析処理成功の通知処理が全く行われない             | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析処理成功時に誤った内容の通知が送信される       | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 正常系         |                    | 分析処理失敗の通知処理が適切に行われる             | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析処理失敗の通知処理が遅延する                   | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析処理失敗の通知処理が一部失敗する               | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析処理失敗の通知処理が全く行われない             | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析処理失敗時に誤った内容の通知が送信される       | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         |                    | 分析処理が失敗したにも関わらず成功通知が送信される | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 正常系         | 日次最終集計日更新 | 更新対象IPの最終集計日が更新されている             | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         | 日次最終集計日更新 | 更新対象IPの最終集計日が一部更新されていない       | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         | 日次最終集計日更新 | 更新対象IPの最終集計日が全く更新されていない       | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         | 日次最終集計日更新 | 更新対象IPの最終集計日が過去の日付で更新される     | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         | 日次最終集計日更新 | 更新対象IPの最終集計日の更新処理でエラーが発生する | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 正常系         | 分析再更新         | 更新対象IPのコメントが更新されている               | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 正常系         | Bing検索           | Bing APIからの記事データ取得                       | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         | Bing検索           | Bing APIエラーレスポンス時の処理継続               | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         | Bing検索           | Bing APIレスポンス空の場合の処理継続               | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 正常系         | Parquet保存        | AIコメントのparquetファイルへの正常保存            | ファイル出力 |          |              |        |            |              |                                      |
| 日次分析       | 異常系         | Parquet保存        | 保存パスが存在しない場合のエラーとならないこと     | ファイル出力 |          |              |        |            |              |                                      |
| 日次分析       | 異常系         | Parquet保存        | 保存データ空の場合のエラーとならないこと           | ファイル出力 |          |              |        |            |              |                                      |
| 日次分析       | 正常系         | 通知               | バッチ成功時の期待内容の成功通知送信               | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         | 通知               | 通知API一時unavailable時のリトライ                 | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 正常系         | 通知               | バッチ失敗時の期待内容の失敗通知送信               | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         | 通知               | 通知API一時unavailable時のリトライ                 | 通知出力     |          |              |        |            |              |                                      |
| 日次分析       | 正常系         | 日付更新           | 最終集計日の対象IPへの正しい更新                   | ログ出力     |          |              |        |            |              |                                      |
| 日次分析       | 異常系         | 日付更新           | 更新対象IPが存在しない場合のエラーとならないこと   | ログ出力     |          |              |        |            |              |                                      |
| 再分析         | 異常系         | コメント更新      | 更新対象IPのコメントが一部更新されていない         | ログ出力     |          |              |        |            |              |                                      |
| 再分析         | 異常系         | コメント更新      | 更新対象IPのコメントが全く更新されていない         | ログ出力     |          |              |        |            |              |                                      |
| 再分析         | 異常系         | コメント更新      | 更新対象IPのコメントが誤った内容で更新される       | ログ出力     |          |              |        |            |              |                                      |
| 再分析         | 異常系         | コメント更新      | 更新対象IPのコメントの更新処理でエラーが発生する   | ログ出力     |          |              |        |            |              |                                      |




| テスト対象要件 | テスト対象要件     | カテゴリ（大） | カテゴリ（小） | 観点                                               | 確認方法                       | 対象処理           | テスト実施日 | 確認者 | テスト結果 | テスト完了日 | 備考                                 |
| -------------- | ------------------ | -------------- | -------------- | -------------------------------------------------- | ------------------------------ | ------------------ | ------------ | ------ | ---------- | ------------ | ------------------------------------ |
| 日次分析       | IP取得処理         | 単体テスト     | 正常系         | IPリストを取得できる                               | 関数呼び出し、戻り値確認       | IP取得処理         |              |        |            |              |                                      |
| 日次分析       | IP取得処理         | 単体テスト     | 異常系         | IPリストが空の場合でもエラーにならない             | 関数呼び出し、戻り値確認       | IP取得処理         |              |        |            |              |                                      |
| 日次分析       | IP抽出処理         | 単体テスト     | 正常系         | 適切な条件でIPを抽出できる                         | 関数呼び出し、戻り値確認       | IP抽出処理         |              |        |            |              |                                      |
| 日次分析       | IP抽出処理         | 単体テスト     | 異常系         | 不適切な条件を指定した場合でもエラーにならない     | 関数呼び出し、戻り値確認       | IP抽出処理         |              |        |            |              |                                      |
| 日次分析       | IP抽出処理         | 単体テスト     | 異常系         | 抽出対象のIPリストが空の場合でもエラーにならない   | 関数呼び出し、戻り値確認       | IP抽出処理         |              |        |            |              |                                      |
| 日次分析       | IP抽出処理         | 単体テスト     | 異常系         | 条件に合致するIPが0件の場合でもエラーにならない    | 関数呼び出し、戻り値確認       | IP抽出処理         |              |        |            |              |                                      |
| 日次分析       | IP分析処理         | 単体テスト     | 正常系         | IPの分析結果を取得できる                           | 関数呼び出し、戻り値確認       | IP分析処理         |              |        |            |              |                                      |
| 日次分析       | IP分析処理         | 単体テスト     | 異常系         | 分析対象のIPが不正な形式の場合でもエラーにならない | 関数呼び出し、戻り値確認       | IP分析処理         |              |        |            |              |                                      |
| 日次分析       | IP分析処理         | 単体テスト     | 異常系         | 分析対象のIPが空文字の場合でもエラーにならない     | 関数呼び出し、戻り値確認       | IP分析処理         |              |        |            |              |                                      |
| 日次分析       | IP分析処理         | 単体テスト     | 異常系         | 分析に失敗した場合でもエラーにならない             | 関数呼び出し、戻り値確認       | IP分析処理         |              |        |            |              |                                      |
| 日次分析       | 分析結果保存処理   | 単体テスト     | 正常系         | 分析結果を指定ファイルに保存できる                 | 関数呼び出し、ファイル出力確認 | 分析結果保存処理   |              |        |            |              |                                      |
| 日次分析       | 分析結果保存処理   | 単体テスト     | 異常系         | 保存先ファイルが存在しなくてもエラーにならない     | 関数呼び出し、ファイル出力確認 | 分析結果保存処理   |              |        |            |              |                                      |
| 日次分析       | 分析結果保存処理   | 単体テスト     | 異常系         | 保存するデータが空の場合でもエラーにならない       | 関数呼び出し、ファイル出力確認 | 分析結果保存処理   |              |        |            |              |                                      |
| 日次分析       | 分析結果保存処理   | 単体テスト     | 異常系         | ファイル保存に失敗した場合でもエラーにならない     | 関数呼び出し、戻り値確認       | 分析結果保存処理   |              |        |            |              |                                      |
| 日次分析       | 通知処理           | 単体テスト     | 正常系         | 成功時の通知を送信できる                           | 関数呼び出し、通知送信確認     | 通知処理           |              |        |            |              |                                      |
| 日次分析       | 通知処理           | 単体テスト     | 異常系         | 通知先が不正な場合でもエラーにならない             | 関数呼び出し、通知送信確認     | 通知処理           |              |        |            |              |                                      |
| 日次分析       | 通知処理           | 単体テスト     | 異常系         | 通知内容が空の場合でもエラーにならない             | 関数呼び出し、通知送信確認     | 通知処理           |              |        |            |              |                                      |
| 日次分析       | 通知処理           | 単体テスト     | 異常系         | 通知処理に失敗した場合でもエラーにならない         | 関数呼び出し、戻り値確認       | 通知処理           |              |        |            |              |                                      |
| 日次分析       | 最終集計日更新処理 | 単体テスト     | 正常系         | IPの最終集計日を更新できる                         | 関数呼び出し、DB更新確認       | 最終集計日更新処理 |              |        |            |              |                                      |
| 日次分析       | 最終集計日更新処理 | 単体テスト     | 異常系         | 存在しないIPを指定した場合でもエラーにならない     | 関数呼び出し、DB更新確認       | 最終集計日更新処理 |              |        |            |              |                                      |
| 日次分析       | 最終集計日更新処理 | 単体テスト     | 異常系         | 日付が不正な形式の場合でもエラーにならない         | 関数呼び出し、DB更新確認       | 最終集計日更新処理 |              |        |            |              |                                      |
| 日次分析       | 最終集計日更新処理 | 単体テスト     | 異常系         | DB更新に失敗した場合でもエラーにならない           | 関数呼び出し、戻り値確認       | 最終集計日更新処理 |              |        |            |              |                                      |
| 日次分析       | LLMコメント生成    | 単体テスト     | 正常系         | 記事情報に基づいた期待形式のコメント生成           | 関数呼び出し、戻り値確認       | LLMコメント生成    |              |        |            |              |                                      |
| 日次分析       | LLMコメント生成    | 単体テスト     | 異常系         | 記事情報不足時のエラーとならないこと               | 関数呼び出し、戻り値確認       | LLMコメント生成    |              |        |            |              |                                      |
| 日次分析       | LLMコメント生成    | 単体テスト     | 異常系         | 不適切な記事情報（アニメあらすじ等）の無視         | 関数呼び出し、戻り値確認       | LLMコメント生成    |              |        |            |              |                                      |
| 日次分析       | LLM要約            | 単体テスト     | 正常系         | 複数記事コメントの文字数制限内での要約             | 関数呼び出し、戻り値確認       | LLM要約            |              |        |            |              |                                      |
| 日次分析       | LLM要約            | 単体テスト     | 異常系         | 入力コメント空の場合のエラーとならないこと         | 関数呼び出し、戻り値確認       | LLM要約            |              |        |            |              |                                      |
| 再分析         | コメント更新処理   | 単体テスト     | 正常系         | IPのコメントを更新できる                           | 関数呼び出し、DB更新確認       | コメント更新処理   |              |        |            |              |                                      | | 再分析         | コメント更新処理   | 単体テスト     | 異常系         | 存在しないIPを指定した場合でもエラーにならない     | 関数呼び出し、DB更新確認       | コメント更新処理   |              |        |            |              |                                      | | 再分析         | コメント更新処理   | 単体テスト     | 異常系         | コメントが空文字の場合でもエラーにならない         | 関数呼び出し、DB更新確認       | コメント更新処理   |              |        |            |              |                                      | | 再分析         | コメント更新処理   | 単体テスト     | 異常系         | DB更新に失敗した場合でもエラーにならない           | 関数呼び出し、戻り値確認       | コメント更新処理   |              |        |            |              |                                      |
