# Multiple URI Site Management POC

複数URIにかかるサイト管理を効率化する概念実証

## 概要

このPOCは、複数のウェブサイトやURIを効率的に管理・監視するシステムの概念実証です。以下の機能を提供します：

- 複数URIの一元管理
- サイトの可用性監視
- コンテンツ変更の検出
- 構造化されたレポート生成

## 使用方法

### 利用可能なコマンドの確認

```bash
nix run .
```

### 主要コマンド

```bash
# アプリケーションの実行
nix run .#run

# テストの実行
nix run .#test

# コードフォーマット
nix run .#format

# 型チェック
nix run .#typecheck

# このREADMEの表示
nix run .#readme
```

### 開発環境への入り方

```bash
nix develop
```

## アーキテクチャ

### ディレクトリ構造

```
.
├── flake.nix           # Nix Flake設定（エントリーポイント管理）
├── README.md           # このファイル
├── main.py             # CLIエントリーポイント
├── mod.py              # コアライブラリ（型定義と公開API）
├── tests/              # テストファイル
│   └── test_*.py
└── src/                # 実装詳細
    ├── monitor.py      # サイト監視ロジック
    ├── reporter.py     # レポート生成
    └── storage.py      # データ永続化
```

### 主要コンポーネント

1. **URIマネージャー**: 複数のURIを管理し、グループ化やタグ付けを行う
2. **監視エンジン**: 定期的にサイトをチェックし、可用性とコンテンツ変更を検出
3. **レポーター**: 監視結果を構造化されたフォーマットで出力
4. **ストレージ**: 履歴データと設定の永続化

## 設計原則

- **自己説明的インターフェース**: `nix run .` で利用可能な機能を動的に表示
- **責務分離**: 各コンポーネントは単一の責務を持つ
- **型安全性**: Pydanticによる厳密な型定義
- **テスト駆動開発**: すべての機能にテストを用意

## 技術スタック

- Python 3.11
- Nix Flakes（パッケージ管理とエントリーポイント）
- Pydantic（データバリデーション）
- httpx（非同期HTTP通信）
- pytest（テスティング）

## 今後の拡張予定

- [ ] 非同期監視による性能向上
- [ ] WebhookやSlack通知の統合
- [ ] ダッシュボードUI
- [ ] 監視ルールのカスタマイズ
- [ ] プラガブルなレポート形式