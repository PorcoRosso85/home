#!/bin/bash
# Pre-commit hook for lsif-indexer project
# Scans for deprecated nil LSP references to prevent regression

set -e

echo "Running nil LSP reference scan..."
./scripts/scan-nil-leftovers.sh

if [ $? -ne 0 ]; then
    echo "❌ Pre-commit hook failed: nil LSP references detected"
    echo "Please remove nil LSP references before committing"
    exit 1
fi

echo "✅ Pre-commit hook passed: No nil LSP references found"
exit 0