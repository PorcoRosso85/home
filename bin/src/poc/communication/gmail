#!/usr/bin/env bash
# Gmail CLI 実行スクリプト

# 環境変数チェック
if [ -z "$GOOGLE_CLIENT_ID" ] || [ -z "$GOOGLE_CLIENT_SECRET" ]; then
    echo "❌ 環境変数を設定してください:"
    echo "export GOOGLE_CLIENT_ID='your-client-id'"
    echo "export GOOGLE_CLIENT_SECRET='your-client-secret'"
    exit 1
fi

# スクリプトのディレクトリに移動
cd "$(dirname "$0")"

# Denoで実行
exec nix develop -c deno run \
  --allow-net \
  --allow-read \
  --allow-write \
  --allow-env \
  --allow-run \
  ./mail/cli_full_auto.ts "$@"