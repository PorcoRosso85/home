import{A as e,B as t,C as n,D as r,E as i,G as a,H as o,I as s,J as c,L as l,M as u,N as d,O as f,P as p,b as m,c as h,e as g,f as _,g as v,h as ee,i as y,l as b,m as x,n as te,o as ne,p as re,q as S,r as ie,s as C,t as w,u as T,v as ae,w as E,x as oe,y as se,z as ce}from"./request.B5lbIw2_.mjs";import"./sys.DlKioN1B.mjs";import{ReadableStream as D}from"node:stream/web";import O,{createTemporaryReferenceSet as le,decodeReply as ue}from"react-server-dom-webpack/server.edge";import{dirname as k,join as de}from"node:path";import{fileURLToPath as A}from"node:url";import{Fragment as j,jsx as M,jsxs as N}from"react/jsx-runtime";function fe(e){return e?.replace(/\\/g,`/`)}function P(e){return typeof Deno<`u`?new Uint8Array(e):Buffer.copyBytesFrom(e)}function pe(e){return typeof Deno<`u`?new Uint8Array(e.reduce((e,t)=>[...e,...t],[])):Buffer.concat(e)}function me(e){return typeof Deno<`u`?e():setImmediate(e)}typeof Deno<`u`&&(globalThis.process={env:Deno.env.toObject(),cwd:Deno.cwd,argv:[Deno.execPath(),Deno.mainModule,...Deno.args],exit:Deno.exit,emit:function(){}}),fe(de(k(A(import.meta.url)),`..`));const F=globalThis.__react_server_client_components__=globalThis.__react_server_client_components__||new Map,he=({remote:t,origin:n}={})=>new Proxy({},{get(r,i){let a=F.get(i),[o,s=`default`]=i.split(`#`);if(!F.has(i)){let r=p(e);if(!r)a={id:o,chunks:[],name:s,async:!0};else{let e=o.replace(/^(?:__\/)+/,e=>e.replace(/__\//g,`../`)),c=Object.values(r.browser).find(t=>t.src?.includes(e)||e.includes(t.file))?.file;if(!c)throw Error(`Client reference "${i}" (${o.replace(/^(?:__\/)+/,e=>e.replace(/__\//g,`../`))}) not found in the manifest.`);a={id:c?`${t?n:``}/${c}`:o,chunks:[],name:s,async:!0}}F.set(i,a)}return a}}),I=[];async function ge(){for(;I.length>0;)await I.shift().call(null)}var _e=class extends Error{constructor(e){super(e),this.name=l,this.message=e,this.stack=Error().stack}};const L=new Proxy({},{get(e,t){if(!e[t]){let[n,r]=t.split(`#`);e[t]={id:`server://${n}`,name:r,chunks:[]}}return e[t]}});async function R(e,k={},de={}){let A=p(se),fe=p(o),F=p(b)?.[x];try{let o=new Promise(async(o,b)=>{let x=p(w);try{ge();let w=x.request.headers.get(`origin`),se=w&&new URL(w).protocol,I=x.request.headers.get(`host`),R=p(a),z=R.flags.isRemote,B=h(),V=``,H,U,W,ve,G=x.request.headers.get(`content-type`)?.includes(`multipart/form-data`),ye,K=decodeURIComponent(x.request.headers.get(`react-server-action`)??null);if(`POST,PUT,PATCH,DELETE`.includes(x.request.method)&&(K&&K!==`null`||G)&&!de.skipFunction){let e=async function(){throw new _e},t=[];if(G){let e={},n=await p(ie)(x.request,{handleFile:async({body:t,...n})=>{let r=[];for await(let e of t)r.push(e);let i=`__react_server_file_${n.name}__`;return e[i]={info:n,file:new Blob(r,{type:n.contentType})},i}}),r=new FormData;for(let[t,i]of n.entries())if(e[i]){let{info:n,file:a}=e[i];r.append(t,a,n.filename)}else r.append(t.replace(/^remote:/,``),i);try{t=await O.decodeReply(r,L)}catch{t=r}}else t=await O.decodeReply(await x.request.text(),L);if(`__react_server_function_args__`in t&&(V=t.__react_server_remote_props__,t=t.__react_server_function_args__??[]),K&&K!==`null`){let[n,r]=K.split(`#`);e=async()=>{try{let e=await globalThis.__webpack_require__(n),i=e[r];if(typeof i!=`function`)throw new _e;let a=i.bind(null,...t),o=await a();return{data:o,actionId:K,error:null}}catch(e){return{data:null,actionId:K,error:e}}}}else e=await O.decodeAction(t[t.length-1]??t,L);if(typeof e!=`function`){let e=Error(`Server Function Not Found`);throw e.digest=e.message,e}let{data:n,actionId:i,error:a}=await e();if(a?.name===l){let e=Error(`Server Function Not Found`);throw e.digest=e.message,e}if(U=!0,!G)H=a?Promise.reject(a):n instanceof Buffer?n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength):n;else{let e=await O.decodeFormState(n,t[t.length-1]??t,L);if(e){let[t,n]=e;H=t,W={"React-Server-Action-Key":encodeURIComponent(n)}}else ve=!0,H=n instanceof Buffer?n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength):n}let s=p(r);if(R.flags.isHTML&&s?.response)return o(s.response);f(g,{formData:t[t.length-1]??t,data:n,error:s?.response?null:a,actionId:i})}let q=le();if(f(s,q),x.request.body&&x.request.body instanceof D&&!x.request.body.locked){let e=new TextDecoder;for await(let t of x.request.body)V+=e.decode(t);V||=`{}`}if(V){let e=await ue(V,L,{temporaryReferences:q});Object.assign(k,e)}let be=x.request.headers.get(`if-modified-since`),J=x.request.headers.get(`cache-control`)===`no-cache`,xe=R.flags.isRSC?S:C;if(be&&!J){let e=await p(_)?.get([x.url,`text/x-component`,B,xe,be]);if(e!==v)return o(new Response(null,{status:304,statusText:`Not Modified`}))}let Se=z||/^https?___/.test(B)?void 0:`default`,Ce=F.base?e=>`/${F.base}/${e?.id||e}`.replace(/\/+/g,`/`):e=>e?.id||e,we=z||w&&I!==w?e=>`${se}//${I}${Ce(e)}`:Ce,Te=()=>{let e=p(u);return M(j,{children:e.map(e=>{let t=we(e);return M(`link`,{rel:`stylesheet`,href:t,precedence:Se},t)})})},Y=F.modulePreload??!0;typeof Y==`function`&&(Y=await Y());let Ee=Y!==!1&&!(z||w&&I!==w)?()=>{let e=p(y);return M(j,{children:e.map(e=>M(`link`,{rel:`modulepreload`,href:we(e)},e))})}:()=>null,De=N(j,{children:[M(`link`,{rel:`preconnect`,href:w??`/`,id:z?`live-io-${B}`:`live-io`}),!1,M(Te,{}),M(Ee,{}),M(e,{...k})]}),X=p(i)??!1;X&&(W={...W,"React-Server-Render":X.url.toString(),"React-Server-Outlet":X.outlet});let Z=p(r);Z?.response&&(W={...W,"React-Server-Render":Z.location,"React-Server-Outlet":`PAGE_ROOT`},m(Z.location));let Q=De;if(U&&R.flags.isRSC&&!R.flags.isRemote&&(W={...W,"React-Server-Data":`rsc`},Q=X||Z?.response||ve?N(j,{children:[De,H]}):M(j,{children:[H]})),!z&&!U&&(!B||B&&B===`PAGE_ROOT`)){let t=p(ne);if(t&&t.$$typeof===Symbol.for(`react.client.reference`)){let n=p(te);n&&(Q=N(j,{children:[M(Te,{}),M(Ee,{}),M(n,{component:t,children:M(e,{...k})})]}))}}let $=new Date().toUTCString();if(R.flags.isRSC&&!R.flags.isRemote){if(!J&&!U){let e=await p(_)?.get([x.url,`text/x-component`,B,S]);if(e!==v){let[t]=e;return o(new Response(t.buffer,{status:t.status,statusText:t.statusText,headers:t.headers}))}}let e=!1,t=new D({type:`bytes`,async start(n){let i=p(T);f(T,new Headers({"content-type":`text/x-component; charset=utf-8`,"cache-control":x.request.headers.get(`cache-control`)===`no-cache`?`no-cache`:`must-revalidate`,"last-modified":$,...W,...i?Object.fromEntries(i.entries()):{}}));let a=O.renderToReadableStream(Q,he({remote:z,origin:w}),{temporaryReferences:q,onError(t){e=!0;let n=p(r);return n?.response?`Location=${n.response.headers.get(`location`)}`:t?.digest??t?.message}}),s=a.getReader(),l=!1,u=[],d=new Promise(e=>me(()=>e(`interrupt`))),m=null;for(;!l;){let e=m||s.read(),t=await Promise.race([e,p(c)??d]);if(t===c){f(c,null),m=e;continue}else if(t===`interrupt`){m=e;break}m=null;let{value:n,done:r}=t;l=r,n&&u.push(P(n))}n.enqueue(new Uint8Array(pe(u)));let h=p(E)??{status:200,statusText:`OK`},g=p(T)??new Headers,v=new Response(t,{...h,headers:g});for(f(ae,v),o(v);!l;){let{value:e,done:t}=await(m||s.read());m=null,l=t,e&&(u.push(P(e)),n.enqueue(e))}n.close();let y=p(ee);!e&&y&&!J&&p(_)?.set([x.url,`text/x-component`,B,S,$],{...h,buffer:pe(u),headers:g},y)}})}else if(R.flags.isHTML||R.flags.isRemote){if(!J&&!U){let e=await p(_)?.get([x.url,`text/html`,B,C]);if(e!==v){let[t]=e,n=new D({type:`bytes`,async start(e){e.enqueue(new Uint8Array(t.buffer)),e.close()}});return o(new Response(n,{status:t.status,statusText:t.statusText,headers:t.headers}))}}let e=p(T);f(T,new Headers({"content-type":`text/html; charset=utf-8`,"cache-control":x.request.headers.get(`cache-control`)===`no-cache`?`no-cache`:`must-revalidate`,"last-modified":$,...e?Object.fromEntries(e.entries()):{}}));let i,a=new Promise(e=>i=e);f(ae,a);let s=!1,c=O.renderToReadableStream(Q,he({remote:z,origin:w}),{temporaryReferences:q,onError(e){s=!0;let t=p(r);return t?.response?o(t.response):e?.digest??e?.message}}),l=d.getStore(),{onPostponed:u}=x,m=p(n),h=p(t),g=p(oe),y=!1,te=await fe({stream:c,bootstrapModules:R.flags.isRSC||R.flags.isRemote?[]:p(ce),bootstrapScripts:R.flags.isRSC||R.flags.isRemote?[]:[`const moduleCache = new Map();
                    self.__webpack_require__ = function (id) {
                      if (!moduleCache.has(id)) {
                        const modulePromise = /^https?\\:/.test(id) ? import(id) : import(("${`/${F.base??``}/`.replace(/\/+/g,`/`)}" + id).replace(/\\/+/g, "/"));
                        modulePromise.then(
                          (module) => {
                            modulePromise.value = module;
                            modulePromise.status = "fulfilled";
                          },
                          (reason) => {
                            modulePromise.reason = reason;
                            modulePromise.status = "rejected";
                          }
                        );
                        moduleCache.set(id, modulePromise);
                      }
                      return moduleCache.get(id);
                    };`.replace(/\n/g,``)],outlet:B,defer:x.request.headers.get(`react-server-defer`)===`true`,start:async()=>{y=!0,d.run(l,async()=>{let e=p(r);if(e?.response)return o(e.response);let t=p(E)??{status:200,statusText:`OK`},n=p(T)??new Headers,[a,c]=te.tee(),l=[];(async()=>{if(!s){for await(let e of c)l.push(P(e));let e=p(ee);e&&!J&&await p(_)?.set([x.url,`text/html`,B,C,$],{...t,buffer:pe(l),headers:n},e)}})();let u=new Response(a,{...t,headers:n});i(u),o(u)})},onError(e,t){!e.digest&&t&&(e.digest=t),(A??console).error(e),s=!0,!y&&d.run(l,async()=>{f(E,{status:500,statusText:`Internal Server Error`}),p(re)?.(e)?.then(o,b)})},formState:ye,isPrerender:typeof u==`function`,onPostponed:u,prelude:m,postponed:h,remote:z,origin:w,importMap:g,body:V,httpContext:{request:{method:x.request.method,url:x.request.url,headers:Array.from(x.request.headers.entries()).reduce((e,[t,n])=>(e[t]=n,e),{}),destination:x.request.destination,referrer:x.request.referrer,referrerPolicy:x.request.referrerPolicy,mode:x.request.mode,credentials:x.request.credentials,cache:x.request.cache,redirect:x.request.redirect,integrity:x.request.integrity,keepalive:x.request.keepalive,isReloadNavigation:x.request.isReloadNavigation,isHistoryNavigation:x.request.isHistoryNavigation},ip:x.ip,method:x.method,url:x.url.toString()}})}else return o(new Response(null,{status:404,statusText:`Not Found`}))}catch(e){A.error(e),p(re)?.(e)?.then(o,b)}});return o}catch(e){return A.error(e),new Response(null,{status:500,statusText:`Internal Server Error`})}}export{R as render};