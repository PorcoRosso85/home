# 03 実行結果 - 単一コンテナの限界

## 概要

極限最適化を施した単一コンテナで1000クライアントに挑戦した結果、**約500クライアントで限界**に達しました。

## 実測値

| フェーズ | クライアント数 | スループット | P95 | P99 | エラー率 |
|---------|--------------|------------|-----|-----|---------|
| Warm-up | 50 | 645 req/s | 2ms | 4ms | 0.00% |
| Ramp-up | 100 | 1,289 req/s | 3ms | 9ms | 0.00% |
| Stress | 250 | 3,096 req/s | 11ms | 35ms | 1.09% |
| Heavy | 500 | 4,147 req/s | 54ms | 115ms | **10.45%** |
| Extreme | 750 | - | - | - | **サーバー無応答** |
| INSANE | 1000 | - | - | - | **到達不可** |

## 限界点の分析

### 1. **破綻点: 500クライアント**
- エラー率が10%を超過
- レイテンシが急激に悪化（P99: 115ms）
- これ以上の負荷でサーバーが無応答に

### 2. **ボトルネック要因**
- **イベントループの飽和**: 単一スレッドの限界
- **コンテキストスイッチング**: 500以上の同時接続で顕著
- **メモリ帯域**: バッファ管理のオーバーヘッド
- **システムコール**: epoll/kqueueの処理限界

### 3. **最適化の効果と限界**
実装した最適化:
- ✅ バッファプール（1500個事前確保）
- ✅ コネクションプール（最大1200接続）
- ✅ リクエストキュー（バックプレッシャー制御）
- ✅ LRUキャッシュ（2000エントリ）
- ✅ 低レベルTCP処理

それでも**物理的限界**は超えられず。

## 結論

1. **単一コンテナの実用限界: 約250-300クライアント**
   - エラー率1%以下を維持できる範囲

2. **理論限界: 約500クライアント**
   - エラー率10%を許容した場合

3. **1000クライアントは不可能**
   - サーバーが完全に無応答になる
   - 単一コンテナでは物理的に処理不可能

## 次のステップ

これらの結果は、水平スケーリング（複数コンテナ/サーバー）の必要性を明確に示しています。04以降のPOCでは、この限界を突破するアーキテクチャを探求します。