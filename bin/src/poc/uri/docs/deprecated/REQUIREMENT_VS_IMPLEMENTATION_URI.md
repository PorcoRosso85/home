# 要求URIと実装URI：設計図と建築物の根本的な違い

## 核心的な問い

「SDKやAPIから直接取得できるリソースURI（例: AWSのARN）だけでは、なぜ不十分なのか？」

この問いこそ、トレーサビリティシステム全体の価値を理解する鍵となります。

## 結論

SDKやAPIから取得できるリソースURI「だけ」では、我々が目指すトレーサビリティグラフを構築するには全く不足です。それらは代替案ではなく、目的も役割も根本的に異なるものです。

## 「あるべき姿の設計図」vs「現実の建築物」

この違いを家を建てるプロセスに例えて説明します：

| 比較対象 | 我々が作るURIグラフ（要求URI） | SDK/APIが返すリソースURI（実装URI） |
|---------|--------------------------------|-------------------------------------|
| **例えるなら** | 「あるべき姿」を描いた設計図 | 「現実に建っている」建築物そのもの |
| **存在タイミング** | コーディングやデプロイの前に存在する | デプロイされて後に初めて存在する |
| **抽象度** | 高い（「認証機能」「パスワードの桁数」という人間が理解する概念） | 低い（`arn:aws:iam::...:policy/MfaPolicy` という物理的な実体） |
| **ライフサイクル** | 安定的（機能の「概念」は滅多に消えない） | 不安定・短命（リソースは削除・再作成され、その度にURIが変わる） |
| **目的** | WHY/WHAT: なぜ、何を作るべきかを定義し、コミュニケーションを円滑にする | HOW/WHERE: どこに、何が存在し、どう操作するかを定義する |
| **役割** | 要求 (Requirement) | 実装 (Implementation) |

## 具体例：パスワードポリシー

### 要求URI（不変のルール）
```
req://security/features/password-policy/minimum-length
```
これは「パスワードは最低12文字にすべきである」という**不変のルール**にアドレスを与えています。

### 実装URI（変動する設定）
```
arn:aws:iam::123456789012:policy/PasswordPolicy-v2
```
これは「パスワードの最低文字数を12に設定している、特定のIAMパスワードポリシー」という**具体的な設定**のARNです。

### 重要な違い

もし、そのIAMポリシーを一度削除して、別の名前で作り直したら：
- ARNは変わってしまいます：`arn:aws:iam::123456789012:policy/PasswordPolicy-v3`
- しかし、「パスワードは12文字にすべき」という要求そのものは、何も変わっていません

## 実装URIの真の価値

では、SDK/APIが返すリソースURIは無意味なのでしょうか？

**いいえ**、それこそが我々のトレーサビリティチェーンの最後のミッシングリンクであり、**最終的な証跡（エビデンス）**となるものです。

### 完全なトレーサビリティの実現

要求URIと実装URIを組み合わせることで：

1. **なぜ？** (L0: ビジネス能力) から
2. **何を？** (L1: 機能)
3. **どうすべきか？** (L2/L3: 要求)
4. そして**どうなっているか？** (L4: 実装)

までを、切れ目なく追跡する究極のトレーサビリティチェーンを完成させることができます。

## 実践的な使い分け

### 要求URI（設計時）
- 機能設計の議論で使用
- 要件定義書で参照
- テストケースの基準として
- 長期的なドキュメントで使用

### 実装URI（運用時）
- 実際のリソース操作で使用
- 監査ログで記録
- インシデント対応で参照
- 自動化スクリプトで利用

## 結論

SDKやAPIから取得できるリソースURIは、**「要求」を定義した安定的なグラフ構造があって初めて、その真価を発揮します**。

それらは、設計図（要求）通りに建てられた建築物の、個々の部屋や設備（実装）を指し示す、最後の、そして最も具体的なアドレスなのです。