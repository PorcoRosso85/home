DELETE THIS FILE AFTER PHASE 1.0 IS COMPLETED

Phase 1.0 — Lite（ゼロCF、貼るだけ土台）

目的
- Cloudflare へ一切デプロイせず、既存サイトに “貼るだけ” で pSEO と軽計測の準備を完了する。

スコープ
- packages/measurement の最小 snippet を提供（外部計測にフォワード）。
- packages/seo の JSON‑LD 素材関数（Collection/HowTo/ImageObject）。
- public/robots.txt と GSC 検証プレースホルダ。

作業ツリー（作成）
- packages/measurement/snippet.ts（最小ビーコン＋リンクラッパのガイド実装）
- packages/measurement/providers.md（GA4/Plausibleなどの接続手順）
- packages/seo/{image-object.ts,howto.ts,collection.ts}（素材関数の要件のみ文書化）
- packages/pseo-templates/{gallery.spec.md,work.spec.md,author.spec.md}（UI要件）
- public/{robots.txt,gsc-verification.html}

実装チェックリスト
- [ ] packages/measurement/snippet.ts を作成し、以下を満たす
  - [ ] `init({ provider: 'ga4'|'plausible', siteId?: string })`
  - [ ] `trackPageview()` と `trackClick(el, meta)`（クリック時に outbound を識別）
  - [ ] `decorateOutbound(el)` で a[href] に onClick を付与（Passive/Beacon）
  - [ ] window 未定義環境（SSR）では副作用なし
  - [ ] **Provider方針**: GA4は公式クライアントに委譲（window.gtag/plausible関数が存在すれば呼び出し、なければno-op）
  - [ ] **配布形態**: ESM + IIFEの2ビルド（dist/measurement/snippet.esm.js, snippet.iife.min.js）
  - [ ] **SPA対応**: trackPageview()はHistory API/popstateフックで自動送信（オプト可）
  - [ ] **冪等ガード**: 連打/二重送信防止（同一要素の短時間連投抑止、インフライトフラグ）
  - [ ] **将来連携**: decorateOutboundは「直接遷移」と「/r/:id 経由」をフラグで切替可能な設計（現段階は直接遷移）
- [ ] providers.md に導入手順（スニペット 1 行の貼り方と env/ID 設定）を記述
  - [ ] **PII/セキュリティ**: URL/Referrer以外のPII送信禁止ポリシーを明記
  - [ ] **CSP/nonce環境**: inline不可時はIIFE外部配信の注意点を追記
- [ ] seo 素材関数の要件を spec としてドキュメント化（コードは後続でも可）
  - [ ] **JSON-LDの型**: Record<string,unknown>ではなく厳密な型定義（最低限の型エイリアス）
  - [ ] **Rich Results Test**: Google Rich Results Testで警告ゼロを受入条件に追加
- [ ] robots.txt を配置（staging は全体 Disallow、本番は Allow）
  - [ ] **環境差対応**: staging/本番で方針切替可能（テンプレート対応）
- [ ] gsc-verification.html の空プレースホルダを配置

受け入れ基準（DoD）
- [ ] **1行導入**: `<script src>` 1行導入（IIFEビルドが存在）、SSR副作用ゼロ（windowガード）
- [ ] **Provider安全性**: Provider未設定/未読込時はno-op（エラーや送信失敗がUIを壊さない）
- [ ] **SPA/冪等性**: SPAでのpageview自動送信（オプト可）、クリックの多重送信防止
- [ ] **JSON-LD品質**: JSON-LD関数は型定義を持ち、Rich Results Testで構造化警告ゼロ
- [ ] **環境対応**: robots/GSCプレースホルダ設置、stagingと本番で方針切替可能

ロールバック
- 追加した `<script>` を削除するだけで動作が元に戻る（サーバ側変更は無し）

備考
- このフェーズでは Cloudflare デプロイは行わない。
- rwsdk-init には触れない（SSR は既に別で検証済みのため）。

