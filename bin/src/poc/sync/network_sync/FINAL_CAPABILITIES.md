# Network Sync シミュレーション機能一覧

## 完全に実装された機能 ✅

### 1. 基本的なネットワークシミュレーション
- **ノード間の接続/切断**
- **イベントの伝播**
- **ローカル書き込みの継続**
- **メッセージシーケンス番号**

### 2. ネットワーク障害シミュレーション
- **遅延 (Latency)**: 0-1000ms
- **ジッター (Jitter)**: 遅延のばらつき
- **パケットロス**: 0-100%
- **帯域幅制限**: events/sec

### 3. トポロジーシミュレーション
- **完全メッシュ**: 全ノード相互接続
- **スター型**: 中央ノード経由
- **部分的分断**: 特定リンクのみ切断

### 4. 競合検出機能
- **ベクタークロック管理**
- **並行イベントの検出**
- **競合ログの記録**

## 部分的に実装された機能 ⚠️

### 1. 同期メカニズム
- 基本的な同期は動作
- 完全な最終的一貫性は未保証
- 大規模データでは要改善

### 2. 競合解決
- Last Write Winsのみ実装
- より高度な戦略は未実装

## テスト可能なシナリオ

### 1. モバイルネットワーク（3G/4G）
```typescript
sim.setNetworkCondition("mobile", "server", {
  latency: 100,      // 100ms
  jitter: 50,        // ±50ms
  packetLoss: 0.05,  // 5%
  bandwidth: 10      // 低帯域
});
```

### 2. 衛星通信
```typescript
sim.setNetworkCondition("satellite", "ground", {
  latency: 600,      // 600ms（GEO衛星）
  jitter: 100,       // 不安定
  packetLoss: 0.02,  // 2%
  bandwidth: 5       // 極低帯域
});
```

### 3. 企業内LAN
```typescript
sim.setNetworkCondition("pc1", "pc2", {
  latency: 1,        // 1ms
  jitter: 0,         // 安定
  packetLoss: 0,     // 0%
  bandwidth: 1000    // 高帯域
});
```

### 4. 不安定なWiFi
```typescript
sim.setNetworkCondition("laptop", "ap", {
  latency: 20,       // 20ms
  jitter: 30,        // 大きな変動
  packetLoss: 0.10,  // 10%
  bandwidth: 50      // 中帯域
});
```

## デモシナリオ

### シナリオ1: オフライン編集の同期
1. 2つのエディタが同じドキュメントを開く
2. ネットワーク切断
3. 両方で異なる編集
4. 再接続時に競合解決

### シナリオ2: 多拠点データ同期
1. 4つの拠点（A,B,C,D）
2. Cが中央サーバー（スター型）
3. 各拠点でデータ作成
4. 中央経由で同期

### シナリオ3: モバイルアプリ同期
1. 不安定な接続環境
2. 頻繁な切断と再接続
3. パケットロスへの耐性
4. 最終的一貫性の達成

## 活用方法

1. **プロトコル設計の検証**
   - 新しい同期アルゴリズムのテスト
   - 競合解決戦略の評価

2. **耐障害性の確認**
   - 各種ネットワーク障害での動作確認
   - 復旧時間の測定

3. **パフォーマンス評価**
   - 同期にかかる時間
   - 帯域幅使用量
   - メッセージ数

4. **教育・デモ**
   - 分散システムの動作理解
   - ネットワーク障害の影響可視化