# Event Sourcing 基盤

イベント列から状態を構築し、効率的な差分同期を実現する基盤。

## 責務

### 1. イベント → 状態変換
```typescript
// IN: イベント列
[CREATE, UPDATE, DELETE, UPDATE...]

// OUT: 現在状態
{ entities: Map, metadata: {...} }
```

### 2. スナップショット管理
- N件ごとに状態を保存
- 任意時点からの再構築
- メモリ効率とパフォーマンスのバランス

### 3. 差分計算
- クライアントの最終同期位置から現在までの差分
- 最小限の転送量
- 順序保証

## テスト対象

- イベント適用の冪等性
- スナップショット + デルタの整合性
- 大量イベント時のパフォーマンス
- 異常イベントの検証とスキップ