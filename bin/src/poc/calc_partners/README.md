# SaaS Partner Calculator

## プロダクト本質
**定義**: SaaSパートナープログラムの報酬計算・シミュレーション特化型計算機

**価値**: 経営者の意思決定を支援する武器
- 属人的コンサルティングからの脱却
- ドメイン知識のコード化
- 完全セルフサービス

## ビジネスモデル
- **形態**: Vertical SaaS
- **価格**: 月額8万円（年額96万円）
- **目標**: 3年目40社、ARR 3,840万円
- **利益率**: 82.3%（税引前）

## コア機能（必須実装）
1. **報酬モデル・ジェネレーター**: 勝ちパターン自動提案
   - 入力: ビジネスモデル、LTV、単価、CPA、パートナー種別
   - 出力: 最適化された報酬体系の複数パターン
2. **リアルタイム収益シミュレーター**: 変数調整による即時可視化
   - 調整: パートナー数、顧客獲得数、解約率、単価変動
   - 表示: 収益予測グラフ、キャッシュフロー変化
3. **API連携**: Stripe/Salesforce/HubSpot等との自動化
   - 目的: CSV/手入力の完全排除

## 標準機能（基本実装）
- シンプル入力UI（Bootstrap標準）
- レポート出力（PDF/CSV）
- シナリオ保存・比較

## 成功指標
- セルフサービス完結
- サポート工数ゼロ
- スケーラブル運用

## 絶対禁止事項
- ❌ UI/UXの装飾・アニメーション
- ❌ CRM機能（パートナー管理）
- ❌ コミュニケーション機能
- ❌ 手厚いオンボーディング
- ❌ 顧客個別カスタマイズ

## アーキテクチャ

```
┌─────────────────────────────────────────────────────────────┐
│            ブラウザ完結型アーキテクチャ                        │
└─────────────────────────────────────────────────────────────┘

Browser (Client-Side Only):
============================
┌──────────────────────────────────────────┐
│             React UI                      │
│         (Bootstrap標準)                   │
└────────────────┬─────────────────────────┘
                 │
                 ▼
┌──────────────────────────────────────────┐
│         KuzuDB WASM Engine               │
│          (In-Memory)                      │
│  • Cypherクエリ実行                       │
│  • リアルタイム計算                        │
│  • シナリオ比較                          │
└────────────────┬─────────────────────────┘
                 │
                 ▼
┌──────────────────────────────────────────┐
│           IndexedDB                       │
│  • シミュレーション結果永続化              │
│  • シナリオ保存                          │
└──────────────────────────────────────────┘
```

**特徴**:
- サーバーレス（インフラコストゼロ）
- 完全オフライン動作可能
- データプライバシー完全保護
- 即座に利用開始可能

## 開発原則
**やる**: 計算ロジック集中、精度向上、API自動化
**やらない**: 機能追加衝動、個別要望、見た目

## テスト

### End-to-End テスト
Kuzu WASMの初期化と基本動作を確認:

```bash
# Puppeteerを使用したE2Eテスト実行
npm run test:e2e

# または直接実行
node test-e2e.mjs
```

**テスト内容**:
- Vite開発サーバーの自動起動
- Kuzu WASM初期化の確認  
- ping.cypherクエリの実行テスト
- 期待値 `[{"response":"pong","status":1}]` の検証
- 自動クリーンアップ

### ブラウザでの手動確認
```bash
npm run dev
# http://localhost:5173 でブラウザ確認
# F12コンソールでKuzuログ確認
```

## ドキュメント構成
- **技術仕様詳細**: [docs/TECHNICAL_SPEC.md](docs/TECHNICAL_SPEC.md)
- **制約事項詳細**: [docs/CONSTRAINTS.md](docs/CONSTRAINTS.md)

---

> 「計算とシミュレーション。それ以外は全てノイズ。」