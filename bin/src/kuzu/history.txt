-- ========================================
-- 1. Create Schema
-- ========================================
-- Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
-- Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
-- Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
-- Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
-- Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
-- ========================================
-- 2. Load Data from CSV files
-- ========================================
-- Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
-- Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
-- Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
-- Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
-- Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
-- ========================================
-- 3. Verification Queries
-- ========================================
-- Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
-- Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
-- Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
-- Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
-- Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
-- Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
-- Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
-- Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
-- ========================================
-- 1. Create Schema
-- ========================================
-- Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
-- Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
-- Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
-- Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
-- Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
-- ========================================
-- 2. Load Data from CSV files
-- ========================================
-- Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
-- Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
-- Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
-- Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
-- Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
-- ========================================
-- 3. Verification Queries
-- ========================================
-- Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
-- Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
-- Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
-- Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
-- Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
-- Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
-- Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
-- Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY (FROM VersionState TO LocationURI) TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
// Load FOLLOWS relationships
COPY (FROM VersionState TO VersionState) FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
// Load CONTAINS_LOCATION relationships
COPY (FROM LocationURI TO LocationURI) CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY (FROM VersionState TO LocationURI) TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
// Load FOLLOWS relationships
COPY (FROM VersionState TO VersionState) FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
// Load CONTAINS_LOCATION relationships
COPY (FROM LocationURI TO LocationURI) CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY (FROM VersionState TO LocationURI) TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true);
// Load FOLLOWS relationships
COPY (FROM VersionState TO VersionState) FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true);
// Load CONTAINS_LOCATION relationships
COPY (FROM LocationURI TO LocationURI) CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true);
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true, FROM='version_id', TO='location_id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true, FROM='version_id', TO='location_id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true, FROM='version_id', TO='location_id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true, FROM='version_id', TO='location_id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true, FROM='version_id', TO='location_id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true, FROM='version_id', TO='location_id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true, FROM='version_id', TO='location_id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true, FROM='version_id', TO='location_id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true, FROM='version_id', TO='id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true, FROM='version_id', TO='id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_relations.csv' (header=true, FROM='version_id', TO='id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
// ========================================
// 1. Create Schema
// ========================================
// Create VersionState node table (simplified schema)
CREATE NODE TABLE VersionState (
    version_id STRING,
    timestamp STRING,
    description STRING,
    change_reason STRING,
    PRIMARY KEY(version_id)
);
// Create LocationURI node table (simplified schema)
CREATE NODE TABLE LocationURI (
    id STRING,
    PRIMARY KEY(id)
);
// Create TRACKS_STATE_OF_LOCATED_ENTITY relationship table
CREATE REL TABLE TRACKS_STATE_OF_LOCATED_ENTITY (
    FROM VersionState TO LocationURI,
    change_type STRING,
    MANY_MANY
);
// Create FOLLOWS relationship table
CREATE REL TABLE FOLLOWS (
    FROM VersionState TO VersionState,
    MANY_MANY
);
// Create CONTAINS_LOCATION relationship table
CREATE REL TABLE CONTAINS_LOCATION (
    FROM LocationURI TO LocationURI,
    relation_type STRING,
    MANY_MANY
);
// ========================================
// 2. Load Data from CSV files
// ========================================
// Load VersionState nodes
COPY VersionState FROM '/home/nixos/bin/src/kuzu/data/version_states.csv' (header=true);
// Load LocationURI nodes
COPY LocationURI FROM '/home/nixos/bin/src/kuzu/data/location_uris.csv' (header=true);
// Load TRACKS_STATE_OF_LOCATED_ENTITY relationships
COPY TRACKS_STATE_OF_LOCATED_ENTITY FROM '/home/nixos/bin/src/kuzu/data/version_location_changes.csv' (header=true, FROM='version_id', TO='id');
// Load FOLLOWS relationships
COPY FOLLOWS FROM '/home/nixos/bin/src/kuzu/data/version_follows.csv' (header=true, FROM='from_version_id', TO='to_version_id');
// Load CONTAINS_LOCATION relationships
COPY CONTAINS_LOCATION FROM '/home/nixos/bin/src/kuzu/data/location_hierarchy.csv' (header=true, FROM='parent_id', TO='child_id');
// ========================================
// 3. Verification Queries
// ========================================
// Check VersionState count
MATCH (v:VersionState) RETURN count(v) as version_count;
// Check LocationURI count
MATCH (l:LocationURI) RETURN count(l) as location_count;
// Check TRACKS_STATE_OF_LOCATED_ENTITY relationships
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
RETURN count(r) as tracks_count;
// Check FOLLOWS relationships
MATCH (v1:VersionState)-[r:FOLLOWS]->(v2:VersionState)
RETURN count(r) as follows_count;
// Check CONTAINS_LOCATION relationships
MATCH (l1:LocationURI)-[r:CONTAINS_LOCATION]->(l2:LocationURI)
RETURN count(r) as contains_count;
// Display version lineage
MATCH (v1:VersionState)-[:FOLLOWS]->(v2:VersionState)
RETURN v1.version_id as from_version, v2.version_id as to_version
ORDER BY v1.version_id;
// Display sample data
MATCH (v:VersionState)
RETURN v.version_id, v.timestamp, v.description
ORDER BY v.timestamp
LIMIT 5;
// Check locations per version
MATCH (v:VersionState)-[:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WITH v.version_id as version, count(l) as location_count
RETURN version, location_count
ORDER BY version;
-- 1. 
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(:LocationURI)
RETURN v.version_id, r.change_type, count(*) as count
ORDER BY v.version_id, r.change_type;
-- 2. v1.2.0
WITH 'v1.2.0' as target_version
MATCH (target:VersionState {version_id: target_version})
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WHERE v.timestamp <= target.timestamp
AND NOT EXISTS {
  MATCH (v2:VersionState)-[r2:TRACKS_STATE_OF_LOCATED_ENTITY]->(l)
  WHERE v2.timestamp > v.timestamp
  AND v2.timestamp <= target.timestamp
}
AND r.change_type != 'DELETE'
RETURN count(l) as active_files;
-- 3. main.ts
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WHERE l.id CONTAINS 'main.ts'
RETURN v.version_id, l.id, r.change_type, v.timestamp
ORDER BY v.timestamp;
MATCH ()-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->() WHERE r.change_type IS NOT NULL RETURN count(r) as count;
MATCH (v:VersionState {version_id: 'v1.1.0'})-[r]->() RETURN count(r);
MATCH ()-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->() WHERE r.change_type = 'DELETE' RETURN count(r);
WITH 'v0.1.1' as target_version
MATCH (target:VersionState {version_id: target_version})
MATCH (v:VersionState)-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->(l:LocationURI)
WHERE v.timestamp <= target.timestamp
AND NOT EXISTS {
  MATCH (v2:VersionState)-[r2:TRACKS_STATE_OF_LOCATED_ENTITY]->(l)
  WHERE v2.timestamp > v.timestamp
  AND v2.timestamp <= target.timestamp
}
AND r.change_type != 'DELETE'
RETURN count(DISTINCT l);
MATCH ()-[r:TRACKS_STATE_OF_LOCATED_ENTITY]->() RETURN r.change_type, count(*) as count GROUP BY r.change_type ORDER BY count DESC;
