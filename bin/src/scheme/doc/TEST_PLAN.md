# Scheme プロジェクト動作テスト計画

## テスト目的

本テスト計画は、アーキテクチャ最適化後のシステムが期待通りに動作することを確認するためのものです。特に以下の点を検証します：

1. ファイル移動と名称変更後も既存機能が正常に動作すること
2. インターフェース層からの呼び出しが適切に処理されること
3. ドキュメントの説明と実際の挙動が一致すること

## テスト環境

- OS: NixOS
- Deno バージョン: 最新安定版
- リポジトリの最新コミットを使用

## テスト項目

### 1. 基本機能テスト

| ID | テスト項目 | 手順 | 期待結果 | 実施者 | 結果 |
|----|----------|-----|----------|-------|-----|
| BF-01 | CLIコントローラー動作確認 | `./src/interface/cliController.ts` を実行 | ヘルプメッセージが表示される | - | - |
| BF-02 | 要件生成機能 | `./src/interface/requirements-generator.ts create TestReq --title="テスト要件" --type=function` を実行 | 要件JSONファイルが生成される | - | - |
| BF-03 | スキーマ生成機能 | `./src/interface/generate-types-from-requirements.ts` を実行 | 要件からスキーマが生成される | - | - |

### 2. 移行後の新機能テスト

| ID | テスト項目 | 手順 | 期待結果 | 実施者 | 結果 |
|----|----------|-----|----------|-------|-----|
| NF-01 | 要件依存関係解析 | インターフェース層から `./interface/cliController.ts deps UserAuthentication` を実行 | 依存関係が正しく表示される | - | - |
| NF-02 | 要件から関数定義への変換 | デモスクリプト `./demo/run_deps_test.ts` を実行 | エラーなく完了し、関数定義が生成される | - | - |

### 3. インターフェース統合テスト

| ID | テスト項目 | 手順 | 期待結果 | 実施者 | 結果 |
|----|----------|-----|----------|-------|-----|
| IT-01 | インターフェースからアプリケーション層への連携 | `./src/interface/cliController.ts list` を実行 | メタスキーマリストが表示される | - | - |
| IT-02 | デモファイルの実行 | `./demo/demo.generate.ts` を実行 | サンプル型が生成される | - | - |

### 4. パフォーマンステスト

| ID | テスト項目 | 手順 | 期待結果 | 実施者 | 結果 |
|----|----------|-----|----------|-------|-----|
| PT-01 | スキーマ生成時間測定 | 同一要件から10回スキーマを生成し、平均時間を測定 | 最適化前と同等以上のパフォーマンス | - | - |
| PT-02 | メモリ使用量測定 | メモリプロファイラを使用してメモリ使用量を測定 | 最適化前と同等以上のメモリ効率 | - | - |

## 実施手順

1. テスト環境のセットアップ
   ```bash
   git clone https://github.com/your-org/scheme.git
   cd scheme
   ```

2. 必要なテストデータの準備
   ```bash
   # サンプル要件の作成
   ./src/interface/requirements-generator.ts create TestRequirement --title="テスト用要件" --type=function
   ```

3. 各テスト項目を順番に実行
   ```bash
   # 例: BF-01の実行
   ./src/interface/cliController.ts
   ```

4. 結果を記録
   - 各テスト項目の結果をテスト項目表に記入
   - 問題がある場合は、詳細な情報（エラーメッセージ、スクリーンショットなど）を記録

## テスト成功基準

1. 全テスト項目が「成功」と判定されること
2. クリティカルなエラーやパフォーマンス低下が発生しないこと
3. READMEやドキュメントの説明と実際の挙動が一致すること

## 問題発生時の対応

1. 問題の詳細を記録（再現手順、エラーメッセージなど）
2. GitHub Issueを作成し、問題を報告
3. 緊急性が高い場合は、担当者に直接連絡

## テスト実施スケジュール

- テスト期間: 2025年3月22日〜3月25日
- テスト結果レビュー: 2025年3月26日
- 最終承認: 2025年3月27日

## テスト実施責任者

- テスト計画作成者: [名前]
- テスト実施者: [名前]
- テスト結果レビュー担当: [名前]

## 付録: テスト環境セットアップ詳細

1. 必要な依存関係
   ```
   deno 1.x
   git
   ```

2. 環境変数設定
   ```
   export SCHEME_CONFIG_PATH=/path/to/config
   ```

3. テストデータの準備手順
   ```
   # データディレクトリの作成
   mkdir -p ./data/requirements
   mkdir -p ./data/generated

   # サンプルメタスキーマの配置
   cp ./samples/meta/* ./data/meta/
   ```
