{
  "$schema": "./data/meta/Requirement.meta.json",
  "$metaSchema": "Requirement",
  "id": "UserAuthenticationUsecase",
  "title": "ユーザー認証Usecase層機能",
  "description": "ユーザー認証機能のユースケース層ロジック",
  "type": "requirement",
  "implementationType": "function",
  "outputPath": {
    "default": "/src/usecase/authentication/UserAuthenticationUsecase.ts"
  },
  "implementation": {
    "function": {
      "parameters": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "description": "ユーザー名"
          },
          "password": {
            "type": "string",
            "description": "パスワード"
          },
          "options": {
            "type": "object",
            "description": "認証オプション",
            "properties": {
              "rememberMe": {
                "type": "boolean",
                "description": "ログイン状態を維持するかどうか"
              },
              "maxAttempts": {
                "type": "number",
                "description": "最大認証試行回数"
              }
            }
          }
        },
        "required": ["username", "password"]
      },
      "returnType": {
        "type": "object",
        "description": "認証結果",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "認証が成功したかどうか"
          },
          "user": {
            "type": "object",
            "description": "認証されたユーザー情報",
            "properties": {
              "id": {
                "type": "string",
                "description": "ユーザーID"
              },
              "username": {
                "type": "string",
                "description": "ユーザー名"
              },
              "roles": {
                "type": "array",
                "description": "ユーザーの権限ロール",
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "token": {
            "type": "string",
            "description": "認証トークン"
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time",
            "description": "トークンの有効期限"
          },
          "error": {
            "type": "string",
            "description": "エラーメッセージ"
          }
        },
        "required": ["success"]
      },
      "async": true,
      "exceptions": [
        {
          "name": "AuthenticationError",
          "description": "認証時にエラーが発生した場合"
        },
        {
          "name": "InvalidCredentialsError",
          "description": "認証情報が不正な場合"
        },
        {
          "name": "UserLockedError",
          "description": "アカウントがロックされている場合"
        }
      ],
      "sideEffects": true,
      "examples": [
        {
          "description": "有効な認証情報での認証",
          "input": {
            "username": "valid_user",
            "password": "correct_password",
            "options": {
              "rememberMe": true
            }
          },
          "output": {
            "success": true,
            "user": {
              "id": "user123",
              "username": "valid_user",
              "roles": ["user"]
            },
            "token": "jwt.token.example",
            "expiresAt": "2025-04-22T05:00:00.000Z"
          }
        }
      ]
    }
  },
  "dependencies": ["UserAuthenticationApplication"],
  "status": "draft",
  "tags": ["auth", "security", "user", "usecase"],
  "priority": "high",
  "createdAt": "2025-03-23T05:00:00.000Z",
  "updatedAt": "2025-03-23T05:00:00.000Z"
}