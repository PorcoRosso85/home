# Bun + Vite + React SSR/SSG プロジェクト

このプロジェクトは、Bunを使用してViteベースのReactアプリケーションのSSR（サーバーサイドレンダリング）およびSSG（静的サイト生成）を実装するフレームワークです。package.jsonなしでモジュールを解決するBunの機能を活用しています。

## 主な特徴

- **パッケージマネージャ不要** - Bunのモジュール解決機能を活用
- **Bun + Vite** - 高速な開発体験とビルドパフォーマンス
- **SSR/SSG対応** - サーバーサイドレンダリングと静的サイト生成の両方に対応
- **React Server Componentライク** - 将来的にはRSCのようなアプローチを目指す

## アーキテクチャ

### インポート方式

このプロジェクトでは、Bunのモジュール解決機能を活用し、package.jsonやnode_modulesが不要です：

```tsx
import React from 'react';
import { hydrateRoot } from 'react-dom/client';
```

### ビルドシステム

`build.ts`はプロジェクトの中心的なビルドツールで、Viteを内部で使用し以下の機能を提供します：

- **開発サーバー設定** - Viteを使用した高速な開発環境
- **SSG事前ビルド** - 静的サイト生成のためのビルドプロセス
- **バンドル** - 本番環境向けのアセットバンドル

単一のビルドスクリプトでこれらすべての機能をカバーし、シンプルな開発ワークフローを実現しています。

### レンダリング戦略

このプロジェクトは以下のレンダリング戦略をサポートしています：

- **SSR（サーバーサイドレンダリング）** - 初期ロード時にサーバーでHTMLを生成
- **SSG（静的サイト生成）** - ビルド時に静的HTMLファイルを生成
- **ハイドレーション** - クライアント側でインタラクティブ性を復元

## 将来の方針

- **React Server Componentへの近似** - ハイドレーションの最適化を進め、可能な限りReact Server Componentに近い体験を提供
- **SSR/SSGのさらなる強化** - パフォーマンスとSEO最適化の向上
- **Bunの最新機能の活用** - ViteとBunの統合による高速な開発・ビルド体験

## ファイル構成

このプロジェクトは以下の3つの主要ファイルで構成されています：

1. **build.ts** - Viteを使用した開発サーバー設定、SSG事前ビルド、バンドルをカバーする統合ビルドツール
2. **index.tsx** - アプリケーションコンポーネントと最適化されたハイドレーション処理
3. **index.html** - SSRテンプレート

## 使い方

### 開発サーバーの起動

```bash
nix run nixpkgs#bun -- run build.ts dev
```

### 静的サイトの生成

```bash
nix run nixpkgs#bun -- run build.ts build
```

### ビルド結果のプレビュー

```bash
nix run nixpkgs#bun -- run build.ts preview
```

### 実行ファイルにする

```bash
chmod +x build.ts
./build.ts dev
```

### デプロイ

生成された`dist`ディレクトリをお好みのホスティングサービスにデプロイしてください。

## Denoとの違い

Bunを使用したViteプロジェクトは以下の利点を提供します：

1. **互換性とエコシステム** - Node.jsとの高い互換性によりViteなどの既存ツールが利用可能
2. **高速なパフォーマンス** - Bunの高速なJavaScriptランタイムによる処理速度向上
3. **シンプルな依存関係管理** - package.jsonなしでの依存関係の解決
4. **組み込みのビルド機能** - ネイティブのトランスパイル・バンドル機能
