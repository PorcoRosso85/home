# Requirement Graph System

## ç›®çš„ (Purpose)

ç¶™ç¶šçš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ«ãƒ¼ãƒ—ã‚’é€šã˜ã¦ã€æ•´åˆæ€§ãŒé«˜ãé‡è¤‡ã®å°‘ãªã„è¦ä»¶ã‚°ãƒ©ãƒ•ã‚’æ§‹ç¯‰ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

è¤‡é›‘ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ç•°ãªã‚‹ç«‹å ´ï¼ˆçµŒå–¶ã€PMã€é–‹ç™ºè€…ï¼‰ã‹ã‚‰å‡ºã•ã‚Œã‚‹è¦ä»¶åŒå£«ãŒã€æ„å›³ã›ãšçŸ›ç›¾ã—ãŸã‚Šã€é‡è¤‡ã—ãŸã‚Šã€ä¾å­˜é–¢ä¿‚ãŒä¸å¥å…¨ã«ãªã£ãŸã‚Šã—ã¾ã™ã€‚æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ã“ã‚Œã‚‰ã®å•é¡Œã‚’æ¤œçŸ¥ã—ã€å…·ä½“çš„ãªä¿®æ­£ã‚’ä¿ƒã™ã“ã¨ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸæ®µéšã§è¦ä»¶ã®å“è³ªã‚’æœ€å¤§åŒ–ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¾ã™ã€‚

## æœ¬è³ª

æ¦‚å¿µã¨ãã®é–¢ä¿‚æ€§ã‚’æœ‰å‘ã‚°ãƒ©ãƒ•ã¨ã—ã¦ç®¡ç†ã™ã‚‹æ±ç”¨ã‚·ã‚¹ãƒ†ãƒ ã€‚é©ç”¨é ˜åŸŸã¯ä½¿ç”¨è€…ãŒå®šç¾©ã™ã‚‹ã€‚

### è¨­è¨ˆæ€æƒ³: Append-Only Architecture

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯**Git-likeãªappend-only**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ï¼š

- **ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªè¦ä»¶**: ä¸€åº¦ä½œæˆã•ã‚ŒãŸè¦ä»¶ã¯å‰Šé™¤ãƒ»æ›´æ–°ã•ã‚Œãšã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒè¿½åŠ ã•ã‚Œã‚‹
- **å®Œå…¨ãªå±¥æ­´è¿½è·¡**: ã™ã¹ã¦ã®å¤‰æ›´ã¯æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã—ã¦è¨˜éŒ²ã•ã‚Œã€éå»ã®çŠ¶æ…‹ã‚’å®Œå…¨ã«å†ç¾å¯èƒ½
- **ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§**: å‰Šé™¤ã‚„æ›´æ–°ã«ã‚ˆã‚‹ä¸æ•´åˆãŒç™ºç”Ÿã—ãªã„
- **ç›£æŸ»å¯èƒ½æ€§**: ã„ã¤ã€èª°ãŒã€ä½•ã‚’ã€ãªãœå¤‰æ›´ã—ãŸã‹ã‚’å®Œå…¨ã«è¿½è·¡

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€è¦ä»¶ã®é€²åŒ–éç¨‹ã‚’é€æ˜åŒ–ã—ã€æ„æ€æ±ºå®šã®æ ¹æ‹ ã‚’æ°¸ç¶šçš„ã«ä¿æŒã—ã¾ã™ã€‚

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

- [`domain/`](./domain/README.md) - è¦ä»¶ã‚°ãƒ©ãƒ•ã®ãƒ«ãƒ¼ãƒ«ã¨åˆ¶ç´„
- [`application/`](./application/README.md) - æ“ä½œå¯èƒ½ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆå‰Šæ¸›æ¸ˆã¿ï¼‰
- [`infrastructure/`](./infrastructure/README.md) - æŠ€è¡“çš„å®Ÿç¾æ‰‹æ®µ

## ç¾åœ¨ã®çŠ¶æ…‹

Phase 5.11å®Œäº†ã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æä¾›ï¼š
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ™ãƒ¼ã‚¹ã®å®‰å…¨ãªè¦ä»¶æ“ä½œ
- POC searchã«ã‚ˆã‚‹é‡è¤‡æ¤œå‡ºï¼ˆVSS+FTSãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ã€é¡ä¼¼åº¦0.98é”æˆï¼‰
- å¾ªç’°ä¾å­˜ã®æ¤œå‡ºã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- æ·±ã•åˆ¶é™ã«ã‚ˆã‚‹ã‚°ãƒ©ãƒ•æ§‹é€ ã®å¥å…¨æ€§ä¿è¨¼
- 256æ¬¡å…ƒembeddingã«ã‚ˆã‚‹é«˜ç²¾åº¦ãªæ„å‘³çš„é¡ä¼¼æ€§æ¤œç´¢

åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼š
- `create_requirement`: è¦ä»¶ä½œæˆï¼ˆé‡è¤‡ãƒã‚§ãƒƒã‚¯ä»˜ãï¼‰
- `find_requirement`: è¦ä»¶æ¤œç´¢
- `list_requirements`: è¦ä»¶ä¸€è¦§
- `add_dependency`: ä¾å­˜é–¢ä¿‚è¿½åŠ ï¼ˆå¾ªç’°æ¤œå‡ºä»˜ãï¼‰
- `find_dependencies`: ä¾å­˜é–¢ä¿‚æ¤œç´¢

## å®Ÿè£…çŠ¶æ³ã¨å°†æ¥å¯¾å¿œ

### âœ… å®Ÿè£…æ¸ˆã¿
- **é‡è¤‡æ¤œå‡º**: POC searchãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ï¼ˆVSS+FTSï¼‰ã«ã‚ˆã‚‹é«˜ç²¾åº¦æ¤œå‡º
- **å¾ªç’°ä¾å­˜æ¤œå‡º**: ä¾å­˜é–¢ä¿‚ã®å¥å…¨æ€§ä¿è¨¼
- **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**: Append-onlyã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹å®Œå…¨å±¥æ­´è¿½è·¡
- **åŸºæœ¬UI**: Templateå…¥åŠ›ã«ã‚ˆã‚‹JSON APIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¿…è¦ååˆ†ï¼‰

### ğŸ”„ é€²è¡Œä¸­
- **E2Eãƒ†ã‚¹ãƒˆ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆ

### ğŸ“‹ å°†æ¥å¯¾å¿œ
- **[Smart Threshold & Graph-Aware Duplicate Detection](./docs/future/smart_threshold.md)**: ã‚°ãƒ©ãƒ•æ§‹é€ ã‚’æ´»ç”¨ã—ãŸé«˜ç²¾åº¦é‡è¤‡æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ 
- **ä¿®æ­£æ¡ˆæç¤ºæ©Ÿèƒ½**: é‡è¤‡ãƒ»çŸ›ç›¾æ¤œå‡ºæ™‚ã®å…·ä½“çš„ä¿®æ­£æ¡ˆè‡ªå‹•ç”Ÿæˆ
- **çŸ›ç›¾æ¤œå‡ºæ©Ÿèƒ½**: è¦ä»¶é–“ã®è«–ç†çš„çŸ›ç›¾ã®è‡ªå‹•æ¤œå‡º
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬**: å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã§ã®æ€§èƒ½æŒ‡æ¨™æ¸¬å®š
- **ãƒãƒ«ãƒãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œ**: åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹ãƒ»ç«¶åˆçŠ¶æ…‹ã®å‡¦ç†
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å……å®Ÿåº¦è¨ˆæ¸¬**: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å“è³ªã®å®šé‡çš„è©•ä¾¡

### âŒ å¯¾å¿œäºˆå®šãªã—
- **æ—¢å­˜ãƒ„ãƒ¼ãƒ«é€£æº**: Jiraã€GitHub Issuesç­‰ã¨ã®çµ±åˆæ©Ÿèƒ½
- **WebUI**: ãƒ–ãƒ©ã‚¦ã‚¶ãƒ™ãƒ¼ã‚¹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

### ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
ç¾åœ¨ã®READMEã§åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•ã‚’æä¾›ã€‚USAGE.mdã®è¿½åŠ ã‚‚æ¤œè¨å¯èƒ½ã€‚

## ã‚·ã‚¹ãƒ†ãƒ ã®æµã‚Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Me/LLM  â”‚        â”‚  System  â”‚        â”‚ KuzuDB  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                   â”‚                   â”‚
     â”‚ Template Input    â”‚                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
     â”‚ (1. Propose)      â”‚                   â”‚
     â”‚                   â”‚                   â”‚
     â”‚                   â”œâ”€ 2. Evaluate     â”‚
     â”‚                   â”‚  (ã‚°ãƒ©ãƒ•æ¤œè¨¼, æ‘©æ“¦åˆ†æ) â”‚
     â”‚                   â”‚                   â”‚
     â”‚ JSONL Response    â”‚                   â”‚
     â”‚ (score, errors)   â”‚                   â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
     â”‚                   â”‚                   â”‚
     â”‚ 3. Refine Query   â”‚                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
     â”‚ ...               â”‚                   â”‚
```

### ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ä¾‹ã¨æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

| å…¥åŠ› (ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ„å›³) | ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ (æŠœç²‹) | å•é¡Œç‚¹ã¨æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
| :--- | :--- | :--- |
| æ·±ã„ã‚°ãƒ©ãƒ•æ§‹é€ ã‚’ä½œæˆï¼ˆè¨­å®šã•ã‚ŒãŸæ·±ã•åˆ¶é™ã‚’è¶…ãˆã‚‹ï¼‰ | `{"score": -1.0, "message": "ã‚°ãƒ©ãƒ•æ·±ã•åˆ¶é™: ..."}` | **æ·±ã•åˆ¶é™é•åã€‚** ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§è¨­å®šã•ã‚ŒãŸã‚°ãƒ©ãƒ•ã®æ·±ã•ä¸Šé™ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚ä¸­é–“ã®è¦ä»¶ã‚’è¿½åŠ ã™ã‚‹ã‹ã€ä¾å­˜é–¢ä¿‚ã‚’å†æ§‹æˆã™ã‚‹ã€‚ |
| Aâ†’Bâ†’Câ†’Aã¨ã„ã†ä¾å­˜é–¢ä¿‚ã‚’ä½œæˆ | `{"score": -1.0, "message": "å¾ªç’°å‚ç…§: ..."}` | **ä¾å­˜é–¢ä¿‚ã®ãƒ«ãƒ¼ãƒ—ã€‚** ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒé€²è¡Œä¸èƒ½ã«ãªã‚‹ã€‚ä¾å­˜é–¢ä¿‚ã‚’è¦‹ç›´ã—ã€å¾ªç’°ã‚’æ–­ã¡åˆ‡ã‚‹ã€‚ |
| ã€Œä½¿ã„ã‚„ã™ã„UIã€ã¨ã„ã†æ›–æ˜§ãªè¦ä»¶ã‚’è¿½åŠ  | `{"frictions": {"ambiguity": -0.6}}` | **è¦ä»¶ã®æ›–æ˜§ã•ã€‚** ã€Œä½¿ã„ã‚„ã™ã„ã€ã®å®šç¾©ãŒä¸æ˜ã€‚ã‚ˆã‚Šå…·ä½“çš„ãªå—ã‘å…¥ã‚ŒåŸºæº–ï¼ˆä¾‹ï¼šã€Œãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã¯ç”»é¢å³ä¸Šã«é…ç½®ã€ï¼‰ã‚’æŒã¤å­è¦ä»¶ã«åˆ†è§£ã™ã‚‹ã€‚ |
| è¤‡æ•°ãƒãƒ¼ãƒ ãŒåŒã˜æ©Ÿèƒ½ã«ç•°ãªã‚‹å„ªå…ˆåº¦ã§è¦ä»¶ã‚’è¿½åŠ  | `{"frictions": {"priority": -0.7}}` | **å„ªå…ˆåº¦ã®ç«¶åˆã€‚** é–¢ä¿‚è€…é–“ã®åˆæ„ãŒå–ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ã€‚å„ªå…ˆåº¦ã«ã¤ã„ã¦ãƒãƒ¼ãƒ é–“ã§å”è­°ã—ã€å€¤ã‚’çµ±ä¸€ã™ã‚‹ã€‚ |

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# é–‹ç™ºç’°å¢ƒ
nix develop

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆå¿…é ˆæ–¹æ³• - ç›´æ¥pytestã¯ç¦æ­¢ï¼‰
nix run .#test

# å®Ÿè¡Œ
nix run .#run
```

## ä½¿ã„æ–¹

```bash
# ã‚¹ã‚­ãƒ¼ãƒåˆæœŸåŒ–ï¼ˆåˆå›ã®ã¿ï¼‰
nix run .#init
# ã¾ãŸã¯
echo '{"type": "schema", "action": "apply"}' | nix run .#run

# åŸºæœ¬çš„ãªè¦ä»¶ä½œæˆï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå…¥åŠ›ï¼‰
echo '{"type": "template", "template": "create_requirement", "parameters": {"id": "req_001", "title": "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æ©Ÿèƒ½", "description": "å®‰å…¨ãªãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã‚’æä¾›"}}' | nix run .#run

# è©³ç´°ãªè¦ä»¶ä½œæˆï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æŒ‡å®šï¼‰
echo '{"type": "template", "template": "create_requirement", "parameters": {"id": "req_002", "title": "äºŒè¦ç´ èªè¨¼", "description": "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ã®ãŸã‚ã®2FAå®Ÿè£…", "status": "proposed"}}' | nix run .#run

# ä¾å­˜é–¢ä¿‚ã®ä½œæˆï¼ˆreq_002ã¯req_001ã«ä¾å­˜ï¼‰
echo '{"type": "template", "template": "add_dependency", "parameters": {"child_id": "req_002", "parent_id": "req_001"}}' | nix run .#run

# è¦ä»¶ã®æ¤œç´¢
echo '{"type": "template", "template": "find_requirement", "parameters": {"id": "req_001"}}' | nix run .#run

# è¦ä»¶ã®ä¸€è¦§å–å¾—
echo '{"type": "template", "template": "list_requirements", "parameters": {"limit": 10}}' | nix run .#run

# ä¾å­˜é–¢ä¿‚ã®æ¤œç´¢
echo '{"type": "template", "template": "find_dependencies", "parameters": {"requirement_id": "req_002", "depth": 2}}' | nix run .#run
```

### ãƒ‡ãƒãƒƒã‚°/ãƒˆãƒ¬ãƒ¼ã‚¹

ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œã‚’è©³ã—ãè¿½è·¡ã—ãŸã„å ´åˆã¯ã€ç’°å¢ƒå¤‰æ•° `RGL_LOG_LEVEL` ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

```bash
# ã™ã¹ã¦ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ­ã‚°ã‚’æœ‰åŠ¹åŒ–
RGL_LOG_LEVEL="*:TRACE" echo '{"type": "cypher", "query": "MATCH (r:RequirementEntity) RETURN r"}' | nix run .#run

# ç‰¹å®šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°
RGL_LOG_LEVEL="rgl.main:DEBUG" echo '{"type": "cypher", "query": "CREATE (r:RequirementEntity {id: \"req_debug\"})"}' | nix run .#run

# è¤‡æ•°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¨­å®š
RGL_LOG_LEVEL="*:WARN,rgl.validator:DEBUG,rgl.scorer:TRACE" echo '{"type": "cypher", "query": "MATCH (r) RETURN r"}' | nix run .#run

# DBãƒ‘ã‚¹ã‚‚æŒ‡å®šã™ã‚‹å ´åˆ
RGL_DB_PATH="/tmp/my_rgl_db" RGL_LOG_LEVEL="*:DEBUG" echo '{"type": "cypher", "query": "MATCH (r) RETURN r"}' | nix run .#run
```

ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ï¼ˆè©³ç´°åº¦é †ï¼‰ï¼š
- `TRACE`: æœ€ã‚‚è©³ç´°ãªå®Ÿè¡Œãƒˆãƒ¬ãƒ¼ã‚¹
- `DEBUG`: ãƒ‡ãƒãƒƒã‚°æƒ…å ±
- `INFO`: ä¸€èˆ¬çš„ãªæƒ…å ±
- `WARN`: è­¦å‘Šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- `ERROR`: ã‚¨ãƒ©ãƒ¼ã®ã¿

## ã‚¹ã‚­ãƒ¼ãƒå®šç¾©

RGLã®ã‚¹ã‚­ãƒ¼ãƒï¼ˆãƒãƒ¼ãƒ‰ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã€ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã®è©³ç´°ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

- **ç¾åœ¨ã®ã‚¹ã‚­ãƒ¼ãƒ**: `ddl/migrations/3.3.0_simplified.cypher`
- **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å±¥æ­´**: `ddl/migrations/`

ä¸»è¦ãªãƒãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ï¼š
- **RequirementEntity**: è¦ä»¶ã‚’è¡¨ç¾
- **LocationURI**: è¦ä»¶ã®è­˜åˆ¥å­ã‚’ç®¡ç†
- **VersionState**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ã‚’è¿½è·¡

ä¸»è¦ãªãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼š
- **DEPENDS_ON**: è¦ä»¶é–“ã®ä¾å­˜é–¢ä¿‚ã‚’è¡¨ç¾
- **LOCATES**: LocationURIã¨è¦ä»¶ã®é–¢é€£ä»˜ã‘
- **TRACKS_STATE_OF**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³çŠ¶æ…‹ã®è¿½è·¡

## å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

ã™ã¹ã¦ã®å‡ºåŠ›ã¯JSONLï¼ˆJSON Linesï¼‰å½¢å¼ã§è¿”ã•ã‚Œã¾ã™ï¼š

```jsonl
{"type": "result", "level": "info", "data": [...], "timestamp": "2025-01-01T00:00:00Z"}
{"type": "error", "level": "error", "message": "...", "details": {...}, "timestamp": "2025-01-01T00:00:02Z"}
```


## ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•

### "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„"
```bash
# âŒ é–“é•ã„
{"type": "template", "template": "add_requirement", "parameters": {...}}

# âœ… æ­£ã—ã„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå
{"type": "template", "template": "create_requirement", "parameters": {...}}
```

### "å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒä¸è¶³"
```bash
# âŒ é–“é•ã„ï¼ˆidã¨titleãŒå¿…é ˆï¼‰
{"type": "template", "template": "create_requirement", "parameters": {}}

# âœ… æ­£ã—ã„
{"type": "template", "template": "create_requirement", "parameters": {
  "id": "req_001",
  "title": "è¦ä»¶å"
}}
```

### "å¾ªç’°ä¾å­˜ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ"
```bash
# âŒ é–“é•ã„ï¼ˆAâ†’Bâ†’Aã®å¾ªç’°ï¼‰
{"type": "template", "template": "add_dependency", 
 "parameters": {"child_id": "req_001", "parent_id": "req_002"}}

# âœ… è§£æ±ºç­–ï¼šä¾å­˜é–¢ä¿‚ã‚’è¦‹ç›´ã—ã€å¾ªç’°ã‚’æ–­ã¡åˆ‡ã‚‹
```

### ã‚°ãƒ©ãƒ•æ·±ã•åˆ¶é™é•å
```bash
# æ·±ã„ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒ¼ãƒ³ã‚’é¿ã‘ã‚‹
# Aâ†’Bâ†’Câ†’Dâ†’Eâ†’Fï¼ˆæ·±ã•6ï¼‰ã¯åˆ¶é™é•åã®å¯èƒ½æ€§

# è§£æ±ºç­–ï¼šä¸­é–“è¦ä»¶ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
# Aâ†’Gã€Bâ†’Gã€Gâ†’Dã€Eâ†’Dã€Fâ†’D
```
